<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title> Download the rectangle </title>
</head>
<body>
		<a id="download" download="myImage.png" href="" onclick="download_img(this);">Download myImage</a>

		<canvas id = 'lesson02' width="500" height="500" style="border: 1px solid black;"/>


		<script>
			let canvas = document.getElementById('lesson02');
			let ctx = canvas.getContext('2d');


			function draw() {
			var data = ctx.getImageData(0, 0, canvas.width, canvas.height);

			for (var i=0; i<150; i++) {
					for (var j=0; j<200; j++) {
						data.data[500*4*(15+i)+(15+j)*4+1] = 255;
						data.data[500*4*(15+i)+(15+j)*4+3] = 255;
					}
			}
			ctx.putImageData(data, 0, 0);
			}
			

			draw()


			download_img = function(el) {
				  var imageURI = canvas.toDataURL("image/png");
				  el.href = imageURI;
				};
		</script>
</body>
</html>